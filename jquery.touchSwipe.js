/*!
* touchSwipe - jQuery Plugin
* https://github.com/mattbryson/TouchSwipe-Jquery-Plugin
* http://labs.skinkers.com/touchSwipe/
* http://plugins.jquery.com/project/touchSwipe
*
* Copyright (c) 2010 Matt Bryson (www.skinkers.com)
* Dual licensed under the MIT or GPL Version 2 licenses.
*
* $version: 1.3.3 */
(function(c){var k="left",j="right",b="up",q="down",h="none",n="auto",s="horizontal",o="vertical",e="all",d="start",g="move",f="end",l="cancel",a="ontouchstart" in window,r="TouchSwipe";var i={fingers:1,threshold:75,maxTimeThreshold:null,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,click:null,triggerOnTouchEnd:true,allowPageScroll:"auto",fallbackToMouseEvents:true};c.fn.swipe=function(v){var u=c(this),t=u.data(r);if(t&&typeof v==="string"){if(t[v]){return t[v].apply(this,Array.prototype.slice.call(arguments,1))}else{c.error("Method "+v+" does not exist on jQuery.swipe")}}else{if(!t&&(typeof v==="object"||!v)){return p.apply(this,arguments)}}return u};c.fn.swipe.defaults=i;c.fn.swipe.phases={PHASE_START:d,PHASE_MOVE:g,PHASE_END:f,PHASE_CANCEL:l};c.fn.swipe.directions={LEFT:k,RIGHT:j,UP:b,DOWN:q};c.fn.swipe.pageScroll={NONE:h,HORIZONTAL:s,VERTICAL:o,AUTO:n};c.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,ALL:e};function p(t){if(t&&(t.allowPageScroll===undefined&&(t.swipe!==undefined||t.swipeStatus!==undefined))){t.allowPageScroll=h}if(!t){t={}}t=c.extend({},c.fn.swipe.defaults,t);return this.each(function(){var v=c(this);var u=v.data(r);if(!u){u=new m(this,t);v.data(r,u)}})}function m(v,x){var G=(a||!x.fallbackToMouseEvents),w=G?"touchstart":"mousedown",S=G?"touchmove":"mousemove",H=G?"touchend":"mouseup",U="touchcancel";var z=0;var Z=null;var t=0;var P=c(v);var F="start";var L=0;var E={x:0,y:0};var y={x:0,y:0};var Y={x:0,y:0};var O=0;var B=0;try{P.bind(w,u);P.bind(U,D)}catch(W){c.error("events not supported "+w+","+U+" on jQuery.swipe")}this.enable=function(){P.bind(w,u);P.bind(U,D);return P};this.disable=function(){X();return P};this.destroy=function(){X();P.data(r,null);return P};function u(ac){ac=ac.originalEvent;var ab,aa=a?ac.touches[0]:ac;F=d;if(a){L=ac.touches.length}else{ac.preventDefault()}z=0;Z=null;t=0;if(!a||(L===x.fingers||x.fingers===e)){E.x=y.x=aa.pageX;E.y=y.y=aa.pageY;O=Q();if(x.swipeStatus){ab=R(ac,F)}}else{D(ac)}if(ab===false){F=l;R(ac,F);return ab}else{P.bind(S,V);P.bind(H,A)}}function V(ad){ad=ad.originalEvent;if(F===f||F===l){return}var ab,aa=a?ad.touches[0]:ad;y.x=aa.pageX;y.y=aa.pageY;B=Q();Z=N();if(a){L=ad.touches.length}F=g;K(ad,Z);if((L===x.fingers||x.fingers===e)||!a){z=I();t=C();if(x.swipeStatus){ab=R(ad,F,Z,z,t)}if(!x.triggerOnTouchEnd){var ac=!T();if(M()===true){F=f;ab=R(ad,F)}else{if(ac){F=l;R(ad,F)}}}}else{F=l;R(ad,F)}if(ab===false){F=l;R(ad,F)}}function A(ab){ab=ab.originalEvent;ab.preventDefault();B=Q();z=I();Z=N();t=C();if(x.triggerOnTouchEnd||(x.triggerOnTouchEnd===false&&F===g)){F=f;if(((L===x.fingers||x.fingers===e)||!a)&&y.x!==0){var aa=!T();if((M()===true||M()===null)&&!aa){R(ab,F)}else{if(aa||M()===false){F=l;R(ab,F)}}}else{F=l;R(ab,F)}}else{if(F===g){F=l;R(ab,F)}}P.unbind(S,V,false);P.unbind(H,A,false)}function D(){L=0;E.x=0;E.y=0;y.x=0;y.y=0;Y.x=0;Y.y=0;B=0;O=0}function R(ac,aa){var ab=undefined;if(x.swipeStatus){ab=x.swipeStatus.call(P,ac,aa,Z||null,z||0,t||0,L)}if(aa===l){if(x.click&&(L===1||!a)&&(isNaN(z)||z===0)){ab=x.click.call(P,ac,ac.target)}}if(aa==f){if(x.swipe){ab=x.swipe.call(P,ac,Z,z,t,L)}switch(Z){case k:if(x.swipeLeft){ab=x.swipeLeft.call(P,ac,Z,z,t,L)}break;case j:if(x.swipeRight){ab=x.swipeRight.call(P,ac,Z,z,t,L)}break;case b:if(x.swipeUp){ab=x.swipeUp.call(P,ac,Z,z,t,L)}break;case q:if(x.swipeDown){ab=x.swipeDown.call(P,ac,Z,z,t,L)}break}}if(aa===l||aa===f){D(ac)}return ab}function M(){if(x.threshold!==null){return z>=x.threshold}return null}function T(){var aa;if(x.maxTimeThreshold){if(t>=x.maxTimeThreshold){aa=false}else{aa=true}}else{aa=true}return aa}function K(aa,ab){if(x.allowPageScroll===h){aa.preventDefault()}else{var ac=x.allowPageScroll===n;switch(ab){case k:if((x.swipeLeft&&ac)||(!ac&&x.allowPageScroll!=s)){aa.preventDefault()}break;case j:if((x.swipeRight&&ac)||(!ac&&x.allowPageScroll!=s)){aa.preventDefault()}break;case b:if((x.swipeUp&&ac)||(!ac&&x.allowPageScroll!=o)){aa.preventDefault()}break;case q:if((x.swipeDown&&ac)||(!ac&&x.allowPageScroll!=o)){aa.preventDefault()}break}}}function C(){return B-O}function I(){return Math.round(Math.sqrt(Math.pow(y.x-E.x,2)+Math.pow(y.y-E.y,2)))}function J(){var aa=E.x-y.x;var ad=y.y-E.y;var ab=Math.atan2(ad,aa);var ac=Math.round(ab*180/Math.PI);if(ac<0){ac=360-Math.abs(ac)}return ac}function N(){var aa=J();if((aa<=45)&&(aa>=0)){return k}else{if((aa<=360)&&(aa>=315)){return k}else{if((aa>=135)&&(aa<=225)){return j}else{if((aa>45)&&(aa<135)){return q}else{return b}}}}}function Q(){var aa=new Date();return aa.getTime()}function X(){P.unbind(w,u);P.unbind(U,D);P.unbind(S,V);P.unbind(H,A)}}})(jQuery);